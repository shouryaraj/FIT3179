{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {"text": "Successful climb to Everest"},
  "width": "container",
  "height": 300,

  "data": {
    "url": "https://raw.githubusercontent.com/shouryaraj/FIT3179/main/everst_success_summit.csv"
  },
  "params": [
      {
      "name": "year_slider",
      "value": 1952,
      "bind": {
        "input": "range",
        "min": 1952,
        "max": 2020,
        "step": 4,
        "name": "Year"
      }
    }
  ],
  "encoding": {
    "x": {"field": "year", "type": "nominal"},
    "y": {"field": "mbrcnt", "type": "quantitative"},
    "fillOpacity": {"condition": {"param": "select", "value": 1}, "value": 0.3},
    "strokeWidth": {
      "condition": [
        {"param": "select", "empty": false, "value": 2},
        {"param": "highlight", "empty": false, "value": 1}
      ],
      "value": 0
    },
    "tooltip": [
      {"field": "year", "type": "nominal"},
      {"field": "mbrcnt", "type": "quantitative"}
    ]
  },
  "layer": [
    {
      "mark": {
        "type": "bar",
        "fill": "#4C78A8",
        "stroke": "black",
        "cursor": "pointer"
      },
        "params": [
    {"name": "highlight", "select": {"type": "point", "on": "mouseover"}},
    {"name": "select", "select": "point"}],

      "transform": [ {"filter": "datum.year > year_slider"}]
    },
    {
      "mark": {
        "type": "text",
        "align": "right",
        "baseline": "middle",
        "dx": 2,
        "dy": -10,
        "fontSize": 11.5,
        "fontStyle": "italic"
      },
      
      "transform": [ {"filter": "datum.year > year_slider"}],
      "encoding": {
        "text": { "field": "mbrcnt", "type": "quantitative" },
        "color": { "value": "black" },
        "opacity": {
          "condition": {
            "test": "datum['year'] == '1953'", 
            "value" : 1
          }, "value" : 0
        }
      }
    }
  ],
  "config": {"view": {"stroke": ""}, "scale": {"bandPaddingInner": 0.2}}
}